import{S as ue,i as fe,s as ce,w as Y,k as I,e as $,t as q,x as D,m as P,c as w,a as x,h as R,d as u,b as j,y as N,g as y,Q as _,o as C,p as me,q as L,B as W,R as de,n as pe,I as K,J as Q,K as T,L as X,j as _e,X as G,f as re,a5 as le,V as ie,a4 as he,_ as be}from"../chunks/vendor-82c75a9c.js";import{s as ve}from"../chunks/stores-3e2e9e39.js";import{C as $e}from"../chunks/Controls-cee10546.js";import{C as oe}from"../chunks/Card-1275b158.js";import{C as we}from"../chunks/Checkmark-0e19b8f1.js";import{L as ye}from"../chunks/Lock-e2660896.js";import{d as ke}from"../chunks/disableInteractablesWhile-0e82c9c8.js";import{e as Ee}from"../chunks/env-66f3c62e.js";import{g as xe}from"../chunks/gqlRequest-8b3b303a.js";import"../chunks/Logo-06ab5db7.js";const ge=`#graphql
  mutation SendPasswordResetEmail($email: String!) {
    sendPasswordResetEmail(email: $email)
  }
`;function je(f){let e,s,a,r,c;return s=new oe({props:{$$slots:{default:[Ie]},$$scope:{ctx:f}}}),{c(){e=$("div"),Y(s.$$.fragment)},l(l){e=w(l,"DIV",{});var n=x(e);D(s.$$.fragment,n),n.forEach(u)},m(l,n){y(l,e,n),N(s,e,null),c=!0},p(l,n){const d={};n&256&&(d.$$scope={dirty:n,ctx:l}),s.$set(d)},i(l){c||(L(s.$$.fragment,l),K(()=>{r&&r.end(1),a=Q(e,T,{delay:400}),a.start()}),c=!0)},o(l){C(s.$$.fragment,l),a&&a.invalidate(),r=X(e,T,{}),c=!1},d(l){l&&u(e),W(s),l&&r&&r.end()}}}function ze(f){let e,s,a,r,c;return s=new oe({props:{$$slots:{default:[qe]},$$scope:{ctx:f}}}),{c(){e=$("div"),Y(s.$$.fragment)},l(l){e=w(l,"DIV",{});var n=x(e);D(s.$$.fragment,n),n.forEach(u)},m(l,n){y(l,e,n),N(s,e,null),c=!0},p(l,n){const d={};n&271&&(d.$$scope={dirty:n,ctx:l}),s.$set(d)},i(l){c||(L(s.$$.fragment,l),K(()=>{r&&r.end(1),a=Q(e,T,{}),a.start()}),c=!0)},o(l){C(s.$$.fragment,l),a&&a.invalidate(),r=X(e,T,{}),c=!1},d(l){l&&u(e),W(s),l&&r&&r.end()}}}function Ie(f){let e,s,a,r,c,l,n,d,g,p;return s=new we({}),{c(){e=$("h4"),Y(s.$$.fragment),a=q(" Verification request sent!"),r=I(),c=$("p"),l=q(`If your email address exists in our system, we send you a magic link to reset your
          password. That link will take you to the next step.`),n=I(),d=$("p"),g=q("Feel free to close this tab in your browser.")},l(t){e=w(t,"H4",{});var m=x(e);D(s.$$.fragment,m),a=R(m," Verification request sent!"),m.forEach(u),r=P(t),c=w(t,"P",{});var k=x(c);l=R(k,`If your email address exists in our system, we send you a magic link to reset your
          password. That link will take you to the next step.`),k.forEach(u),n=P(t),d=w(t,"P",{});var b=x(d);g=R(b,"Feel free to close this tab in your browser."),b.forEach(u)},m(t,m){y(t,e,m),N(s,e,null),_(e,a),y(t,r,m),y(t,c,m),_(c,l),y(t,n,m),y(t,d,m),_(d,g),p=!0},i(t){p||(L(s.$$.fragment,t),p=!0)},o(t){C(s.$$.fragment,t),p=!1},d(t){t&&u(e),W(s),t&&u(r),t&&u(c),t&&u(n),t&&u(d)}}}function ne(f){let e,s;return{c(){e=$("p"),s=q(f[2]),this.h()},l(a){e=w(a,"P",{class:!0});var r=x(e);s=R(r,f[2]),r.forEach(u),this.h()},h(){j(e,"class","error-message")},m(a,r){y(a,e,r),_(e,s)},p(a,r){r&4&&_e(s,a[2])},d(a){a&&u(e)}}}function qe(f){let e,s,a,r,c,l,n,d,g,p,t,m,k,b,V,o,h,S,A,z,U,M,F,B,J,Z;s=new ye({});let E=f[2]&&f[3]&&ne(f);return{c(){e=$("h4"),Y(s.$$.fragment),a=q(" Verify Your Identity"),r=I(),c=$("p"),l=q("Before we reset your password, we need to make sure it's really you."),n=I(),d=$("p"),g=q(`Enter your email below. If an account with that email address exists, we'll send a magic
          link to that email inbox with instructions on how to reset your password.`),p=I(),t=$("form"),m=$("div"),k=$("label"),b=q("Email Address"),V=I(),o=$("input"),S=I(),E&&E.c(),A=I(),z=$("button"),U=q("Send"),this.h()},l(i){e=w(i,"H4",{});var v=x(e);D(s.$$.fragment,v),a=R(v," Verify Your Identity"),v.forEach(u),r=P(i),c=w(i,"P",{});var ee=x(c);l=R(ee,"Before we reset your password, we need to make sure it's really you."),ee.forEach(u),n=P(i),d=w(i,"P",{});var te=x(d);g=R(te,`Enter your email below. If an account with that email address exists, we'll send a magic
          link to that email inbox with instructions on how to reset your password.`),te.forEach(u),p=P(i),t=w(i,"FORM",{class:!0});var O=x(t);m=w(O,"DIV",{class:!0});var H=x(m);k=w(H,"LABEL",{for:!0,class:!0});var se=x(k);b=R(se,"Email Address"),se.forEach(u),V=P(H),o=w(H,"INPUT",{title:!0,id:!0,type:!0}),S=P(H),E&&E.l(H),H.forEach(u),A=P(O),z=w(O,"BUTTON",{style:!0,type:!0,class:!0});var ae=x(z);U=R(ae,"Send"),ae.forEach(u),O.forEach(u),this.h()},h(){j(k,"for","password-reset-email-verification-input"),j(k,"class","svelte-hzfgjj"),o.disabled=f[4],j(o,"title",h=f[4]?`You are currently logged in with email ${f[0]} and can only reset that account's password unless you log out.`:"Enter the email associated with your account"),j(o,"id","password-reset-email-verification-input"),j(o,"type","text"),G(o,"disabled",f[4]),j(m,"class","svelte-hzfgjj"),re(z,"margin-bottom",f[2]&&f[3]?"37px":"0"),j(z,"type","submit"),j(z,"class","secondary svelte-hzfgjj"),G(z,"disabled",f[1]),j(t,"class","flex svelte-hzfgjj")},m(i,v){y(i,e,v),N(s,e,null),_(e,a),y(i,r,v),y(i,c,v),_(c,l),y(i,n,v),y(i,d,v),_(d,g),y(i,p,v),y(i,t,v),_(t,m),_(m,k),_(k,b),_(m,V),_(m,o),le(o,f[0]),_(m,S),E&&E.m(m,null),_(t,A),_(t,z),_(z,U),B=!0,J||(Z=[ie(o,"input",f[6]),ie(t,"submit",he(f[5]))],J=!0)},p(i,v){(!B||v&1&&h!==(h=i[4]?`You are currently logged in with email ${i[0]} and can only reset that account's password unless you log out.`:"Enter the email associated with your account"))&&j(o,"title",h),v&1&&o.value!==i[0]&&le(o,i[0]),i[2]&&i[3]?E?E.p(i,v):(E=ne(i),E.c(),E.m(m,null)):E&&(E.d(1),E=null),(!B||v&12)&&re(z,"margin-bottom",i[2]&&i[3]?"37px":"0"),v&2&&G(z,"disabled",i[1])},i(i){B||(L(s.$$.fragment,i),K(()=>{F&&F.end(1),M=Q(t,T,{}),M.start()}),B=!0)},o(i){C(s.$$.fragment,i),M&&M.invalidate(),F=X(t,T,{}),B=!1},d(i){i&&u(e),W(s),i&&u(r),i&&u(c),i&&u(n),i&&u(d),i&&u(p),i&&u(t),E&&E.d(),i&&F&&F.end(),J=!1,be(Z)}}}function Pe(f){let e,s,a,r,c,l,n,d,g,p,t,m;e=new $e({});const k=[ze,je],b=[];function V(o,h){return o[1]?1:0}return p=V(f),t=b[p]=k[p](f),{c(){Y(e.$$.fragment),s=I(),a=$("main"),r=$("h1"),c=q("Reset Password"),l=I(),n=$("h4"),d=q("(Step 1 of 2)"),g=I(),t.c(),this.h()},l(o){D(e.$$.fragment,o),s=P(o),a=w(o,"MAIN",{class:!0});var h=x(a);r=w(h,"H1",{});var S=x(r);c=R(S,"Reset Password"),S.forEach(u),l=P(h),n=w(h,"H4",{});var A=x(n);d=R(A,"(Step 1 of 2)"),A.forEach(u),g=P(h),t.l(h),h.forEach(u),this.h()},h(){j(a,"class","password-reset-email-verification svelte-hzfgjj")},m(o,h){N(e,o,h),y(o,s,h),y(o,a,h),_(a,r),_(r,c),_(a,l),_(a,n),_(n,d),_(a,g),b[p].m(a,null),m=!0},p(o,[h]){let S=p;p=V(o),p===S?b[p].p(o,h):(pe(),C(b[S],1,1,()=>{b[S]=null}),me(),t=b[p],t?t.p(o,h):(t=b[p]=k[p](o),t.c()),L(t,1),t.m(a,null))},i(o){m||(L(e.$$.fragment,o),L(t),m=!0)},o(o){C(e.$$.fragment,o),C(t),m=!1},d(o){W(e,o),o&&u(s),o&&u(a),b[p].d()}}}function Re(f,e,s){var t,m,k;let a;de(f,ve,b=>s(7,a=b));let r=(m=(t=a==null?void 0:a.user)==null?void 0:t.email)!=null?m:"",c=!!((k=a==null?void 0:a.user)==null?void 0:k.email),l=!1,n="",d=!1;const g=async()=>{s(3,d=!0),!n&&(await ke(async()=>{await fetch(`${Ee.viteSveltekitHost}/proxy/send-password-reset-email`,xe({query:ge,variables:{email:r}}))}),s(1,l=!0))};function p(){r=this.value,s(0,r)}return f.$$.update=()=>{f.$$.dirty&1&&s(2,n=(()=>r?r.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)?"":"Email address format invalid":"Email address is required")())},[r,l,n,d,c,g,p]}class De extends ue{constructor(e){super();fe(this,e,Re,Pe,ce,{})}}export{De as default};
