import{S as ue,i as fe,s as ce,w as Y,k as I,e as $,t as q,x as D,m as P,c as w,a as x,h as R,d as u,b as j,y as N,g as y,Q as _,o as C,p as me,q as L,B as W,R as de,n as pe,I as K,J as Q,K as T,L as X,j as _e,X as G,f as ae,a5 as le,V as ie,a4 as he,_ as ve}from"../chunks/vendor-7cce70e9.js";import{s as be}from"../chunks/stores-2526e4c7.js";import{C as $e}from"../chunks/Controls-ce70bd57.js";import{C as oe}from"../chunks/Card-850693fc.js";import{C as we}from"../chunks/Checkmark-6e702549.js";import{L as ye}from"../chunks/Lock-0a9fb9d1.js";import{d as ke}from"../chunks/disableInteractablesWhile-0e82c9c8.js";import{e as Ee}from"../chunks/env-cb046133.js";import{g as xe}from"../chunks/gqlRequest-8b3b303a.js";import"../chunks/Logo-cf3f36c8.js";const ge=`#graphql
  mutation SendPasswordResetEmail($email: String!) {
    sendPasswordResetEmail(email: $email)
  }
`;function je(f){let e,s,r,a,c;return s=new oe({props:{$$slots:{default:[Ie]},$$scope:{ctx:f}}}),{c(){e=$("div"),Y(s.$$.fragment)},l(l){e=w(l,"DIV",{});var n=x(e);D(s.$$.fragment,n),n.forEach(u)},m(l,n){y(l,e,n),N(s,e,null),c=!0},p(l,n){const d={};n&256&&(d.$$scope={dirty:n,ctx:l}),s.$set(d)},i(l){c||(L(s.$$.fragment,l),K(()=>{a&&a.end(1),r=Q(e,T,{delay:400}),r.start()}),c=!0)},o(l){C(s.$$.fragment,l),r&&r.invalidate(),a=X(e,T,{}),c=!1},d(l){l&&u(e),W(s),l&&a&&a.end()}}}function ze(f){let e,s,r,a,c;return s=new oe({props:{$$slots:{default:[qe]},$$scope:{ctx:f}}}),{c(){e=$("div"),Y(s.$$.fragment)},l(l){e=w(l,"DIV",{});var n=x(e);D(s.$$.fragment,n),n.forEach(u)},m(l,n){y(l,e,n),N(s,e,null),c=!0},p(l,n){const d={};n&271&&(d.$$scope={dirty:n,ctx:l}),s.$set(d)},i(l){c||(L(s.$$.fragment,l),K(()=>{a&&a.end(1),r=Q(e,T,{}),r.start()}),c=!0)},o(l){C(s.$$.fragment,l),r&&r.invalidate(),a=X(e,T,{}),c=!1},d(l){l&&u(e),W(s),l&&a&&a.end()}}}function Ie(f){let e,s,r,a,c,l,n,d,g,p;return s=new we({}),{c(){e=$("h4"),Y(s.$$.fragment),r=q(" Verification request sent!"),a=I(),c=$("p"),l=q(`If your email address exists in our system, we send you a magic link to reset your
          password. That link will take you to the next step.`),n=I(),d=$("p"),g=q("Feel free to close this tab in your browser.")},l(t){e=w(t,"H4",{});var m=x(e);D(s.$$.fragment,m),r=R(m," Verification request sent!"),m.forEach(u),a=P(t),c=w(t,"P",{});var k=x(c);l=R(k,`If your email address exists in our system, we send you a magic link to reset your
          password. That link will take you to the next step.`),k.forEach(u),n=P(t),d=w(t,"P",{});var v=x(d);g=R(v,"Feel free to close this tab in your browser."),v.forEach(u)},m(t,m){y(t,e,m),N(s,e,null),_(e,r),y(t,a,m),y(t,c,m),_(c,l),y(t,n,m),y(t,d,m),_(d,g),p=!0},i(t){p||(L(s.$$.fragment,t),p=!0)},o(t){C(s.$$.fragment,t),p=!1},d(t){t&&u(e),W(s),t&&u(a),t&&u(c),t&&u(n),t&&u(d)}}}function ne(f){let e,s;return{c(){e=$("p"),s=q(f[2]),this.h()},l(r){e=w(r,"P",{class:!0});var a=x(e);s=R(a,f[2]),a.forEach(u),this.h()},h(){j(e,"class","error-message")},m(r,a){y(r,e,a),_(e,s)},p(r,a){a&4&&_e(s,r[2])},d(r){r&&u(e)}}}function qe(f){let e,s,r,a,c,l,n,d,g,p,t,m,k,v,V,o,h,S,A,z,U,M,F,B,J,Z;s=new ye({});let E=f[2]&&f[3]&&ne(f);return{c(){e=$("h4"),Y(s.$$.fragment),r=q(" Verify Your Identity"),a=I(),c=$("p"),l=q("Before we reset your password, we need to make sure it's really you."),n=I(),d=$("p"),g=q(`Enter your email below. If an account with that email address exists, we'll send a magic
          link to that email inbox with instructions on how to reset your password.`),p=I(),t=$("form"),m=$("div"),k=$("label"),v=q("Email Address"),V=I(),o=$("input"),S=I(),E&&E.c(),A=I(),z=$("button"),U=q("Send"),this.h()},l(i){e=w(i,"H4",{});var b=x(e);D(s.$$.fragment,b),r=R(b," Verify Your Identity"),b.forEach(u),a=P(i),c=w(i,"P",{});var ee=x(c);l=R(ee,"Before we reset your password, we need to make sure it's really you."),ee.forEach(u),n=P(i),d=w(i,"P",{});var te=x(d);g=R(te,`Enter your email below. If an account with that email address exists, we'll send a magic
          link to that email inbox with instructions on how to reset your password.`),te.forEach(u),p=P(i),t=w(i,"FORM",{class:!0});var O=x(t);m=w(O,"DIV",{class:!0});var H=x(m);k=w(H,"LABEL",{for:!0,class:!0});var se=x(k);v=R(se,"Email Address"),se.forEach(u),V=P(H),o=w(H,"INPUT",{title:!0,id:!0,type:!0}),S=P(H),E&&E.l(H),H.forEach(u),A=P(O),z=w(O,"BUTTON",{style:!0,type:!0,class:!0});var re=x(z);U=R(re,"Send"),re.forEach(u),O.forEach(u),this.h()},h(){j(k,"for","password-reset-email-verification-input"),j(k,"class","svelte-hzfgjj"),o.disabled=f[4],j(o,"title",h=f[4]?`You are currently logged in with email ${f[0]} and can only reset that account's password unless you log out.`:"Enter the email associated with your account"),j(o,"id","password-reset-email-verification-input"),j(o,"type","text"),G(o,"disabled",f[4]),j(m,"class","svelte-hzfgjj"),ae(z,"margin-bottom",f[2]&&f[3]?"37px":"0"),j(z,"type","submit"),j(z,"class","secondary svelte-hzfgjj"),G(z,"disabled",f[1]),j(t,"class","flex svelte-hzfgjj")},m(i,b){y(i,e,b),N(s,e,null),_(e,r),y(i,a,b),y(i,c,b),_(c,l),y(i,n,b),y(i,d,b),_(d,g),y(i,p,b),y(i,t,b),_(t,m),_(m,k),_(k,v),_(m,V),_(m,o),le(o,f[0]),_(m,S),E&&E.m(m,null),_(t,A),_(t,z),_(z,U),B=!0,J||(Z=[ie(o,"input",f[6]),ie(t,"submit",he(f[5]))],J=!0)},p(i,b){(!B||b&1&&h!==(h=i[4]?`You are currently logged in with email ${i[0]} and can only reset that account's password unless you log out.`:"Enter the email associated with your account"))&&j(o,"title",h),b&1&&o.value!==i[0]&&le(o,i[0]),i[2]&&i[3]?E?E.p(i,b):(E=ne(i),E.c(),E.m(m,null)):E&&(E.d(1),E=null),(!B||b&12)&&ae(z,"margin-bottom",i[2]&&i[3]?"37px":"0"),b&2&&G(z,"disabled",i[1])},i(i){B||(L(s.$$.fragment,i),K(()=>{F&&F.end(1),M=Q(t,T,{}),M.start()}),B=!0)},o(i){C(s.$$.fragment,i),M&&M.invalidate(),F=X(t,T,{}),B=!1},d(i){i&&u(e),W(s),i&&u(a),i&&u(c),i&&u(n),i&&u(d),i&&u(p),i&&u(t),E&&E.d(),i&&F&&F.end(),J=!1,ve(Z)}}}function Pe(f){let e,s,r,a,c,l,n,d,g,p,t,m;e=new $e({});const k=[ze,je],v=[];function V(o,h){return o[1]?1:0}return p=V(f),t=v[p]=k[p](f),{c(){Y(e.$$.fragment),s=I(),r=$("main"),a=$("h1"),c=q("Reset Password"),l=I(),n=$("h4"),d=q("(Step 1 of 2)"),g=I(),t.c(),this.h()},l(o){D(e.$$.fragment,o),s=P(o),r=w(o,"MAIN",{class:!0});var h=x(r);a=w(h,"H1",{});var S=x(a);c=R(S,"Reset Password"),S.forEach(u),l=P(h),n=w(h,"H4",{});var A=x(n);d=R(A,"(Step 1 of 2)"),A.forEach(u),g=P(h),t.l(h),h.forEach(u),this.h()},h(){j(r,"class","password-reset-email-verification svelte-hzfgjj")},m(o,h){N(e,o,h),y(o,s,h),y(o,r,h),_(r,a),_(a,c),_(r,l),_(r,n),_(n,d),_(r,g),v[p].m(r,null),m=!0},p(o,[h]){let S=p;p=V(o),p===S?v[p].p(o,h):(pe(),C(v[S],1,1,()=>{v[S]=null}),me(),t=v[p],t?t.p(o,h):(t=v[p]=k[p](o),t.c()),L(t,1),t.m(r,null))},i(o){m||(L(e.$$.fragment,o),L(t),m=!0)},o(o){C(e.$$.fragment,o),C(t),m=!1},d(o){W(e,o),o&&u(s),o&&u(r),v[p].d()}}}function Re(f,e,s){var t,m,k;let r;de(f,be,v=>s(7,r=v));let a=(m=(t=r==null?void 0:r.user)==null?void 0:t.email)!=null?m:"",c=!!((k=r==null?void 0:r.user)==null?void 0:k.email),l=!1,n="",d=!1;const g=async()=>{s(3,d=!0),!n&&(await ke(async()=>{await fetch(`${Ee.viteSveltekitHost}/proxy/send-password-reset-email`,xe({query:ge,variables:{email:a}}))}),s(1,l=!0))};function p(){a=this.value,s(0,a)}return f.$$.update=()=>{f.$$.dirty&1&&s(2,n=(()=>a?a.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)?"":"Email address format invalid":"Email address is required")())},[a,l,n,d,c,g,p]}class De extends ue{constructor(e){super();fe(this,e,Re,Pe,ce,{})}}export{De as default};
