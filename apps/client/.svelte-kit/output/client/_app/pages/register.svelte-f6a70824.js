import{S as mt,i as pt,s as dt,e as _,t as R,c as h,a as g,h as N,d as p,b as m,g as Y,Q as u,j as ve,I as ue,L as fe,w as Te,k as P,x as Le,m as q,X as W,y as Re,a5 as Z,V as ie,a4 as _t,q as v,o as A,p as ce,B as Ne,_ as ht,J as me,K as C,n as pe,ac as bt,ad as gt}from"../chunks/vendor-e5aa1018.js";import{I as vt}from"../chunks/Info-69c5f299.js";import{V as yt,a as kt}from"../chunks/VisibilityOff-332b0d28.js";import{C as wt}from"../chunks/Controls-d4e3dd65.js";import{e as st}from"../chunks/env-cb046133.js";import{g as at}from"../chunks/gqlRequest-8b3b303a.js";import{d as lt}from"../chunks/disableInteractablesWhile-0e82c9c8.js";import{g as it,p as jt}from"../chunks/navigation-6e098c45.js";import"../chunks/stores-75d9f28e.js";import"../chunks/Logo-99862feb.js";import"../chunks/singletons-d19c42e4.js";const Et=s=>`#graphql
query UserWhereUniqueInput ($where: UserWhereUniqueInput!) {
  user(where: $where ) {
    ${s}
  }
}
`,It=`#graphql
mutation RegisterUser($userRegistrationInput: UserRegistrationInput!) {
  registerUser(UserRegistrationInput: $userRegistrationInput)
}
`;function nt(s){let e,t=s[4].username+"",a,l,f,o;return{c(){e=_("p"),a=R(t),this.h()},l(n){e=h(n,"P",{class:!0});var r=g(e);a=N(r,t),r.forEach(p),this.h()},h(){m(e,"class","error-message svelte-tc6nj5")},m(n,r){Y(n,e,r),u(e,a),o=!0},p(n,r){(!o||r&16)&&t!==(t=n[4].username+"")&&ve(a,t)},i(n){o||(ue(()=>{f&&f.end(1),l=me(e,C,{}),l.start()}),o=!0)},o(n){l&&l.invalidate(),f=fe(e,C,{}),o=!1},d(n){n&&p(e),n&&f&&f.end()}}}function ot(s){let e,t=s[4].email+"",a,l,f,o;return{c(){e=_("p"),a=R(t),this.h()},l(n){e=h(n,"P",{class:!0});var r=g(e);a=N(r,t),r.forEach(p),this.h()},h(){m(e,"class","error-message svelte-tc6nj5")},m(n,r){Y(n,e,r),u(e,a),o=!0},p(n,r){(!o||r&16)&&t!==(t=n[4].email+"")&&ve(a,t)},i(n){o||(ue(()=>{f&&f.end(1),l=me(e,C,{}),l.start()}),o=!0)},o(n){l&&l.invalidate(),f=fe(e,C,{}),o=!1},d(n){n&&p(e),n&&f&&f.end()}}}function Ut(s){let e,t,a;return{c(){e=_("input"),this.h()},l(l){e=h(l,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){m(e,"type","text"),m(e,"id","register-password"),m(e,"class","svelte-tc6nj5")},m(l,f){Y(l,e,f),Z(e,s[3]),t||(a=ie(e,"input",s[16]),t=!0)},p(l,f){f&8&&e.value!==l[3]&&Z(e,l[3])},d(l){l&&p(e),t=!1,a()}}}function Pt(s){let e,t,a;return{c(){e=_("input"),this.h()},l(l){e=h(l,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){m(e,"type","password"),m(e,"id","register-password"),m(e,"class","svelte-tc6nj5")},m(l,f){Y(l,e,f),Z(e,s[3]),t||(a=ie(e,"input",s[15]),t=!0)},p(l,f){f&8&&e.value!==l[3]&&Z(e,l[3])},d(l){l&&p(e),t=!1,a()}}}function qt(s){let e,t;return e=new yt({}),{c(){Te(e.$$.fragment)},l(a){Le(e.$$.fragment,a)},m(a,l){Re(e,a,l),t=!0},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){Ne(e,a)}}}function At(s){let e,t;return e=new kt({}),{c(){Te(e.$$.fragment)},l(a){Le(e.$$.fragment,a)},m(a,l){Re(e,a,l),t=!0},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){Ne(e,a)}}}function ut(s){let e,t=s[4].password+"",a,l,f,o;return{c(){e=_("p"),a=R(t),this.h()},l(n){e=h(n,"P",{class:!0});var r=g(e);a=N(r,t),r.forEach(p),this.h()},h(){m(e,"class","error-message svelte-tc6nj5")},m(n,r){Y(n,e,r),u(e,a),o=!0},p(n,r){(!o||r&16)&&t!==(t=n[4].password+"")&&ve(a,t)},i(n){o||(ue(()=>{f&&f.end(1),l=me(e,C,{}),l.start()}),o=!0)},o(n){l&&l.invalidate(),f=fe(e,C,{}),o=!1},d(n){n&&p(e),n&&f&&f.end()}}}function ft(s){let e,t,a,l,f;return{c(){e=_("p"),t=R(s[5]),this.h()},l(o){e=h(o,"P",{class:!0});var n=g(e);t=N(n,s[5]),n.forEach(p),this.h()},h(){m(e,"class","password-warning svelte-tc6nj5")},m(o,n){Y(o,e,n),u(e,t),f=!0},p(o,n){(!f||n&32)&&ve(t,o[5])},i(o){f||(ue(()=>{l&&l.end(1),a=me(e,C,{}),a.start()}),f=!0)},o(o){a&&a.invalidate(),l=fe(e,C,{}),f=!1},d(o){o&&p(e),o&&l&&l.end()}}}function ct(s){let e,t=s[4].form+"",a,l,f,o;return{c(){e=_("p"),a=R(t),this.h()},l(n){e=h(n,"P",{class:!0});var r=g(e);a=N(r,t),r.forEach(p),this.h()},h(){m(e,"class","error-message svelte-tc6nj5")},m(n,r){Y(n,e,r),u(e,a),o=!0},p(n,r){(!o||r&16)&&t!==(t=n[4].form+"")&&ve(a,t)},i(n){o||(ue(()=>{f&&f.end(1),l=me(e,C,{}),l.start()}),o=!0)},o(n){l&&l.invalidate(),f=fe(e,C,{}),o=!1},d(n){n&&p(e),n&&f&&f.end()}}}function Tt(s){let e,t,a,l,f,o,n,r,I,te,re,T,G,c,D,de,F,J,_e,O,he,ne,H,L,M,K,U,be,$,Oe,We,Q,ye,S,B,V,Ce,ke,we,je,x,se,ae,oe,Se,Be,Ve,X,ze,Ee,ge,Ie,De,Ze;e=new wt({});let y=s[4].username&&(s[9]||s[1])&&nt(s);J=new vt({});let k=s[4].email&&s[9]&&ot(s);function Fe(i,d){return i[6]?Pt:Ut}let Ue=Fe(s),z=Ue(s);const Je=[At,qt],le=[];function Ke(i,d){return i[6]?0:1}B=Ke(s),V=le[B]=Je[B](s);let w=s[4].password&&s[9]&&ut(s),j=s[5]&&ft(s),E=s[4].form&&ct(s);return{c(){Te(e.$$.fragment),t=P(),a=_("main"),l=_("section"),f=_("h1"),o=R("Register"),n=P(),r=_("form"),I=_("label"),te=R("Username"),re=P(),T=_("input"),G=P(),y&&y.c(),c=P(),D=_("label"),de=R("Email "),F=_("span"),Te(J.$$.fragment),_e=P(),O=_("input"),he=P(),k&&k.c(),ne=P(),H=_("div"),L=_("label"),M=R("Zip code"),K=P(),U=_("input"),be=P(),$=_("label"),Oe=R("Password"),We=P(),Q=_("div"),z.c(),ye=P(),S=_("button"),V.c(),Ce=P(),w&&w.c(),ke=P(),j&&j.c(),we=P(),E&&E.c(),je=P(),x=_("div"),se=_("a"),ae=_("button"),oe=_("span"),Se=R("Already a member?"),Be=R(" Log In"),Ve=P(),X=_("button"),ze=R("Register"),this.h()},l(i){Le(e.$$.fragment,i),t=q(i),a=h(i,"MAIN",{class:!0});var d=g(a);l=h(d,"SECTION",{class:!0});var ee=g(l);f=h(ee,"H1",{class:!0});var Qe=g(f);o=N(Qe,"Register"),Qe.forEach(p),n=q(ee),r=h(ee,"FORM",{class:!0});var b=g(r);I=h(b,"LABEL",{for:!0});var Xe=g(I);te=N(Xe,"Username"),Xe.forEach(p),re=q(b),T=h(b,"INPUT",{id:!0}),G=q(b),y&&y.l(b),c=q(b),D=h(b,"LABEL",{for:!0});var He=g(D);de=N(He,"Email "),F=h(He,"SPAN",{class:!0,title:!0});var Ye=g(F);Le(J.$$.fragment,Ye),Ye.forEach(p),He.forEach(p),_e=q(b),O=h(b,"INPUT",{id:!0}),he=q(b),k&&k.l(b),ne=q(b),H=h(b,"DIV",{class:!0});var Pe=g(H);L=h(Pe,"LABEL",{for:!0});var Ge=g(L);M=N(Ge,"Zip code"),Ge.forEach(p),K=q(Pe),U=h(Pe,"INPUT",{id:!0,autocomplete:!0,"aria-label":!0}),Pe.forEach(p),be=q(b),$=h(b,"LABEL",{for:!0});var $e=g($);Oe=N($e,"Password"),$e.forEach(p),We=q(b),Q=h(b,"DIV",{class:!0});var qe=g(Q);z.l(qe),ye=q(qe),S=h(qe,"BUTTON",{type:!0,class:!0});var xe=g(S);V.l(xe),xe.forEach(p),qe.forEach(p),Ce=q(b),w&&w.l(b),ke=q(b),j&&j.l(b),we=q(b),E&&E.l(b),je=q(b),x=h(b,"DIV",{class:!0});var Ae=g(x);se=h(Ae,"A",{class:!0,href:!0});var et=g(se);ae=h(et,"BUTTON",{class:!0});var Me=g(ae);oe=h(Me,"SPAN",{class:!0});var tt=g(oe);Se=N(tt,"Already a member?"),tt.forEach(p),Be=N(Me," Log In"),Me.forEach(p),et.forEach(p),Ve=q(Ae),X=h(Ae,"BUTTON",{type:!0,class:!0});var rt=g(X);ze=N(rt,"Register"),rt.forEach(p),Ae.forEach(p),b.forEach(p),ee.forEach(p),d.forEach(p),this.h()},h(){m(f,"class","svelte-tc6nj5"),m(I,"for","register-username"),m(T,"id","register-username"),W(T,"disabled",s[8]),m(F,"class","tooltip-container"),m(F,"title","Your email is used log in and recover your account if your forget your password."),m(D,"for","register-email"),m(O,"id","register-email"),W(O,"disabled",s[8]),m(L,"for","zip-code"),m(U,"id","zip-code"),m(U,"autocomplete","off"),m(U,"aria-label","If you are reading this, do not fill this out."),W(U,"disabled",s[8]),m(H,"class","zip-code svelte-tc6nj5"),m($,"for","register-password"),W($,"disabled",s[8]),m(S,"type","button"),m(S,"class","secondary svelte-tc6nj5"),W(S,"disabled",s[8]),m(Q,"class","flex svelte-tc6nj5"),m(oe,"class","svelte-tc6nj5"),m(ae,"class","secondary svelte-tc6nj5"),m(se,"class","secondary svelte-tc6nj5"),m(se,"href","/log-in"),m(X,"type","submit"),m(X,"class","primary svelte-tc6nj5"),W(X,"disabled",s[9]&&s[10]),m(x,"class","actions svelte-tc6nj5"),m(r,"class","svelte-tc6nj5"),m(l,"class","register svelte-tc6nj5"),m(a,"class","svelte-tc6nj5")},m(i,d){Re(e,i,d),Y(i,t,d),Y(i,a,d),u(a,l),u(l,f),u(f,o),u(l,n),u(l,r),u(r,I),u(I,te),u(r,re),u(r,T),Z(T,s[0]),u(r,G),y&&y.m(r,null),u(r,c),u(r,D),u(D,de),u(D,F),Re(J,F,null),u(r,_e),u(r,O),Z(O,s[2]),u(r,he),k&&k.m(r,null),u(r,ne),u(r,H),u(H,L),u(L,M),u(H,K),u(H,U),Z(U,s[7]),u(r,be),u(r,$),u($,Oe),u(r,We),u(r,Q),z.m(Q,null),u(Q,ye),u(Q,S),le[B].m(S,null),u(r,Ce),w&&w.m(r,null),u(r,ke),j&&j.m(r,null),u(r,we),E&&E.m(r,null),u(r,je),u(r,x),u(x,se),u(se,ae),u(ae,oe),u(oe,Se),u(ae,Be),u(x,Ve),u(x,X),u(X,ze),Ie=!0,De||(Ze=[ie(T,"input",s[12]),ie(O,"input",s[13]),ie(U,"input",s[14]),ie(S,"click",s[17]),ie(r,"submit",_t(s[11]))],De=!0)},p(i,[d]){d&1&&T.value!==i[0]&&Z(T,i[0]),d&256&&W(T,"disabled",i[8]),i[4].username&&(i[9]||i[1])?y?(y.p(i,d),d&530&&v(y,1)):(y=nt(i),y.c(),v(y,1),y.m(r,c)):y&&(pe(),A(y,1,1,()=>{y=null}),ce()),d&4&&O.value!==i[2]&&Z(O,i[2]),d&256&&W(O,"disabled",i[8]),i[4].email&&i[9]?k?(k.p(i,d),d&528&&v(k,1)):(k=ot(i),k.c(),v(k,1),k.m(r,ne)):k&&(pe(),A(k,1,1,()=>{k=null}),ce()),d&128&&U.value!==i[7]&&Z(U,i[7]),d&256&&W(U,"disabled",i[8]),d&256&&W($,"disabled",i[8]),Ue===(Ue=Fe(i))&&z?z.p(i,d):(z.d(1),z=Ue(i),z&&(z.c(),z.m(Q,ye)));let ee=B;B=Ke(i),B!==ee&&(pe(),A(le[ee],1,1,()=>{le[ee]=null}),ce(),V=le[B],V||(V=le[B]=Je[B](i),V.c()),v(V,1),V.m(S,null)),d&256&&W(S,"disabled",i[8]),i[4].password&&i[9]?w?(w.p(i,d),d&528&&v(w,1)):(w=ut(i),w.c(),v(w,1),w.m(r,ke)):w&&(pe(),A(w,1,1,()=>{w=null}),ce()),i[5]?j?(j.p(i,d),d&32&&v(j,1)):(j=ft(i),j.c(),v(j,1),j.m(r,we)):j&&(pe(),A(j,1,1,()=>{j=null}),ce()),i[4].form?E?(E.p(i,d),d&16&&v(E,1)):(E=ct(i),E.c(),v(E,1),E.m(r,je)):E&&(pe(),A(E,1,1,()=>{E=null}),ce()),d&1536&&W(X,"disabled",i[9]&&i[10])},i(i){Ie||(v(e.$$.fragment,i),v(y),v(J.$$.fragment,i),v(k),v(V),v(w),v(j),v(E),ue(()=>{ge&&ge.end(1),Ee=me(l,C,{}),Ee.start()}),Ie=!0)},o(i){A(e.$$.fragment,i),A(y),A(J.$$.fragment,i),A(k),A(V),A(w),A(j),A(E),Ee&&Ee.invalidate(),ge=fe(l,C,{}),Ie=!1},d(i){Ne(e,i),i&&p(t),i&&p(a),y&&y.d(),Ne(J),k&&k.d(),z.d(),le[B].d(),w&&w.d(),j&&j.d(),E&&E.d(),i&&ge&&ge.end(),De=!1,ht(Ze)}}}function Lt(s,e,t){let a;const{debounce:l}=bt,{isEmail:f}=gt;let o="",n=!1,r="",I="",te="",re=!0,T="",G=!1,c={username:"",email:"",password:"",form:""},D=!1;const de=async()=>{if(t(9,D=!0),a)return;if(T)return t(8,G=!0),await lt(async()=>{setTimeout(async()=>{t(8,G=!1),await it("/verify-email")},2e3)});t(8,G=!0);let L=!1;await lt(async()=>{var M;try{const[K,U]=await Promise.all([jt("/verify-email"),fetch(`${st.viteSveltekitHost}/proxy/register`,at({query:It,variables:{userRegistrationInput:{username:o.trim(),email:r.trim(),password:I}}})).then(async be=>await be.json())]);if((M=U==null?void 0:U.error)==null?void 0:M.message)throw U.error.message;L=!0}catch(K){if(K==="A user with that username already exists. Please try another."){t(1,n=!0);return}t(4,c.form="An unknown error occurred. Please try again later.",c)}}),L&&await it("/verify-email")},F=l(async()=>{const L=await fetch(`${st.viteSveltekitHost}/proxy/user-where`,at({query:Et("id"),variables:{where:{username:o}}})).then(async M=>await M.json());t(1,n=!!L)},500);function J(){o=this.value,t(0,o)}function _e(){r=this.value,t(2,r)}function O(){T=this.value,t(7,T)}function he(){I=this.value,t(3,I)}function ne(){I=this.value,t(3,I)}const H=()=>t(6,re=!re);return s.$$.update=()=>{s.$$.dirty&19&&t(4,c=(()=>{if(!o)return t(4,c.username="Username is required",c),c;if(o.length<2)return t(4,c.username="Username must be at least 2 characters",c),c;const M=["-","_","."].some(K=>o.startsWith(K)||o.endsWith(K));return!o.match(/^[a-zA-Z0-9_\.\-]*$/)||M?(t(4,c.username="Username must be alphanumeric. Periods, hyphens, and underscores may only be used as separators.",c),c):n?(t(4,c.username="Username is taken. Please choose another.",c),c):(t(4,c.username="",c),c)})()),s.$$.dirty&20&&t(4,c=(()=>r?f(r)?(t(4,c.email="",c),c):(t(4,c.email="Email address format invalid",c),c):(t(4,c.email="Email address is required",c),c))()),s.$$.dirty&24&&t(4,c=(()=>I?I.length<8?(t(4,c.password="Password must be at least 8 characters in length",c),c):(t(4,c.password="",c),t(5,te=""),c):(t(4,c.password="Password is required",c),c))()),s.$$.dirty&16&&t(10,a=Object.values(c).some(L=>!!L)),s.$$.dirty&1&&o&&F(),s.$$.dirty&8&&t(5,te=(()=>I.trim()!==I?"Did you mean to add whitespace to the beginning or end of your password?":"")())},[o,n,r,I,c,te,re,T,G,D,a,de,J,_e,O,he,ne,H]}class Mt extends mt{constructor(e){super();pt(this,e,Lt,Tt,dt,{})}}export{Mt as default};
